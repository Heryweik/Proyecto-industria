var http = require("http"),
    server;

exports.app = function app(config, callback) {
    var app = require('./app').create(config, callback);
    return app;
}

exports.start = function(config, callback){
    var app = exports.app(config, callback);

    server = config.https && config.https.key && config.https.cert ? 
            require("https").createServer(config.https, app) : http.createServer(app);
    server.listen(parseInt(config.port || 8080, config.address || undefined, 10));

    return true;
};

exports.stop = function() {
    server.close();
}
