{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../SERVICES/equipo.service\";\nimport * as i2 from \"@angular/platform-browser\";\nconst _c0 = \".ng-touched.ng-invalid[_ngcontent-%COMP%]:is(input, .selector[_ngcontent-%COMP%], [_ngcontent-%COMP%]:checked), .ng-dirty.ng-invalid[_ngcontent-%COMP%]:is(input, .selector[_ngcontent-%COMP%], [_ngcontent-%COMP%]:checked){\\r\\n    outline: 2px solid red;\\r\\n}\\r\\n\\r\\n.ng-dirty.ng-invalid[_ngcontent-%COMP%]:is(input, .selector[_ngcontent-%COMP%], [_ngcontent-%COMP%]:checked){\\r\\n    outline: 2px solid red;\\r\\n}\\r\\n\\r\\n.inputs-container[_ngcontent-%COMP%]{\\r\\n    border: 1px solid #E1E1E1;\\r\\n    border-radius: 5px;\\r\\n    padding: 17px;\\r\\n\\r\\n    background: #fff;\\r\\n\\r\\n\\r\\n\\r\\n}\\r\\n\\r\\n.prou[_ngcontent-%COMP%]{\\r\\n    height: 15cm;\\r\\n}\\r\\n\\r\\nform[_ngcontent-%COMP%]{\\r\\n    background-color: #fff;\\r\\n    border-radius: 3px;\\r\\n    padding: 10px;\\r\\n    margin: 0 auto;\\r\\n    width: 350px;\\r\\n\\r\\n\\r\\n}\\r\\n\\r\\n.form[_ngcontent-%COMP%]{\\r\\n\\r\\n    align-content: center;\\r\\n    display: flex;\\r\\n    flex-direction:column;\\r\\n    justify-content: center;\\r\\n}\\r\\n\\r\\n.input-file2[_ngcontent-%COMP%]{\\r\\n    align-content: space-around;\\r\\n    image-rendering: auto;\\r\\n\\r\\n}\\r\\n\\r\\n.container-form[_ngcontent-%COMP%]{\\r\\n  display: flex;\\r\\nflex-direction: row;\\r\\njustify-content: flex-start;\\r\\nalign-items: flex-start;\\r\\nalign-content: stretch;\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.container-icon[_ngcontent-%COMP%]{\\r\\n  padding-top: 5px;\\r\\n}\\r\\n\\r\\n.container-part-form[_ngcontent-%COMP%]{\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.input[_ngcontent-%COMP%]{\\r\\n  height: 28px;\\r\\n  margin-bottom: auto;\\r\\n}\\r\\n\\r\\n.errors-container[_ngcontent-%COMP%]{\\r\\n  font-size: 12px;\\r\\n  margin-bottom: 3px;\\r\\n  color: rgb(22, 22, 22);\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ldy1wcm9kdWN0cy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztJQUVJLHNCQUFzQjtBQUMxQjs7QUFFQTtJQUNJLHNCQUFzQjtBQUMxQjs7QUFHQTtJQUNJLHlCQUF5QjtJQUN6QixrQkFBa0I7SUFDbEIsYUFBYTs7SUFFYixnQkFBZ0I7Ozs7QUFJcEI7O0FBRUE7SUFDSSxZQUFZO0FBQ2hCOztBQUlBO0lBQ0ksc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixhQUFhO0lBQ2IsY0FBYztJQUNkLFlBQVk7OztBQUdoQjs7QUFDQTs7SUFFSSxxQkFBcUI7SUFDckIsYUFBYTtJQUNiLHFCQUFxQjtJQUNyQix1QkFBdUI7QUFDM0I7O0FBRUE7SUFDSSwyQkFBMkI7SUFDM0IscUJBQXFCOztBQUV6Qjs7QUFFQTtFQUNFLGFBQWE7QUFDZixtQkFBbUI7QUFDbkIsMkJBQTJCO0FBQzNCLHVCQUF1QjtBQUN2QixzQkFBc0I7RUFDcEIsV0FBVztBQUNiOztBQUVBO0VBQ0UsZ0JBQWdCO0FBQ2xCOztBQUVBO0VBQ0UsV0FBVztBQUNiOztBQUVBO0VBQ0UsWUFBWTtFQUNaLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsc0JBQXNCO0FBQ3hCIiwiZmlsZSI6Im5ldy1wcm9kdWN0cy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm5nLXRvdWNoZWQubmctaW52YWxpZDppcyhpbnB1dCwuc2VsZWN0b3IsIDpjaGVja2VkKSxcclxuLm5nLWRpcnR5Lm5nLWludmFsaWQ6aXMoaW5wdXQsLnNlbGVjdG9yLCA6Y2hlY2tlZCl7XHJcbiAgICBvdXRsaW5lOiAycHggc29saWQgcmVkO1xyXG59XHJcblxyXG4ubmctZGlydHkubmctaW52YWxpZDppcyhpbnB1dCwuc2VsZWN0b3IsIDpjaGVja2VkKXtcclxuICAgIG91dGxpbmU6IDJweCBzb2xpZCByZWQ7XHJcbn1cclxuXHJcblxyXG4uaW5wdXRzLWNvbnRhaW5lcntcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNFMUUxRTE7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICBwYWRkaW5nOiAxN3B4O1xyXG5cclxuICAgIGJhY2tncm91bmQ6ICNmZmY7XHJcblxyXG5cclxuXHJcbn1cclxuXHJcbi5wcm91e1xyXG4gICAgaGVpZ2h0OiAxNWNtO1xyXG59XHJcblxyXG5cclxuXHJcbmZvcm17XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xyXG4gICAgYm9yZGVyLXJhZGl1czogM3B4O1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICAgIG1hcmdpbjogMCBhdXRvO1xyXG4gICAgd2lkdGg6IDM1MHB4O1xyXG5cclxuXHJcbn1cclxuLmZvcm17XHJcblxyXG4gICAgYWxpZ24tY29udGVudDogY2VudGVyO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOmNvbHVtbjtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG59XHJcblxyXG4uaW5wdXQtZmlsZTJ7XHJcbiAgICBhbGlnbi1jb250ZW50OiBzcGFjZS1hcm91bmQ7XHJcbiAgICBpbWFnZS1yZW5kZXJpbmc6IGF1dG87XHJcblxyXG59XHJcblxyXG4uY29udGFpbmVyLWZvcm17XHJcbiAgZGlzcGxheTogZmxleDtcclxuZmxleC1kaXJlY3Rpb246IHJvdztcclxuanVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xyXG5hbGlnbi1pdGVtczogZmxleC1zdGFydDtcclxuYWxpZ24tY29udGVudDogc3RyZXRjaDtcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLmNvbnRhaW5lci1pY29ue1xyXG4gIHBhZGRpbmctdG9wOiA1cHg7XHJcbn1cclxuXHJcbi5jb250YWluZXItcGFydC1mb3Jte1xyXG4gIHdpZHRoOiAxMDAlO1xyXG59XHJcblxyXG4uaW5wdXR7XHJcbiAgaGVpZ2h0OiAyOHB4O1xyXG4gIG1hcmdpbi1ib3R0b206IGF1dG87XHJcbn1cclxuXHJcbi5lcnJvcnMtY29udGFpbmVye1xyXG4gIGZvbnQtc2l6ZTogMTJweDtcclxuICBtYXJnaW4tYm90dG9tOiAzcHg7XHJcbiAgY29sb3I6IHJnYigyMiwgMjIsIDIyKTtcclxufVxyXG5cclxuXHJcbiJdfQ== */\";\nexport class NewProductsComponent {\n  constructor(equipoService, sanitizer) {\n    this.equipoService = equipoService;\n    this.sanitizer = sanitizer;\n    this.archivos = []; //Sera de tipo array\n    //agregar el formGrup\n\n    this.productoForm = new FormGroup({\n      // nombre: new FormControl('',[Validators.required, Validators.minLength(2) ]),\n      titulo: new FormControl('', [Validators.required, Validators.minLength(3), Validators.maxLength(20)]),\n      precio: new FormControl('', [Validators.required]),\n      categoria: new FormControl('', [Validators.required]),\n      estado: new FormControl('', [Validators.required]),\n      decripcion: new FormControl('', [Validators.required, Validators.minLength(3), Validators.maxLength(30)]),\n      ubicacion: new FormControl('', [Validators.required])\n    }); //Extraer el base 64\n\n    /*\r\n    extraerBase64 =async ($event:any) => new Promise((resolve,reject) =>{\r\n      try{\r\n        const unsafeImg = window.URL.createObjectURL($event);\r\n        const image= this.sanitizer.bypassSecurityTrustUrl(unsafeImg);\r\n        const reader = new FileReader();\r\n                reader.readAsDataURL($event);\r\n        reader.onload =() =>{\r\n          resolve({\r\n            base:reader.result\r\n          });\r\n        };\r\n        reader.onerror = error =>{\r\n          resolve({\r\n            base:null\r\n          });\r\n        }; return null;\r\n      }catch(e){\r\n        return null;\r\n      }\r\n    });\r\n    */\n\n    this.producto = {\n      fk_id_user: '',\n      fk_id_department: '',\n      fk_id_product_category: '',\n      fk_id_product_status: '',\n      var_name: '',\n      text_description: '',\n      dou_price: 0\n    };\n  }\n\n  ngOnInit() {\n    this.producto.fk_id_user = localStorage.getItem('token');\n  }\n  /*\r\n  get nombreControl():FormControl{\r\n    return this.loginForm.get('nombre') as FormControl\r\n  }*/\n\n\n  get tituloControl() {\n    return this.productoForm.get('titulo');\n  }\n\n  get precioControl() {\n    return this.productoForm.get('precio');\n  }\n\n  get categoriaControl() {\n    return this.productoForm.get('categoria');\n  }\n\n  get estadoControl() {\n    return this.productoForm.get('estado');\n  }\n\n  get descripcionControl() {\n    return this.productoForm.get('decripcion');\n  }\n\n  get ubicacionControl() {\n    return this.productoForm.get('ubicacion');\n  }\n\n  capturarFile(event) {\n    Array.from(event.target.files).forEach(element => {\n      this.loadFile(element);\n\n      if (this.archivos.length < 10) {\n        this.archivos.push(element);\n        console.log(\"\\n\\n<<<<\" + this.archivos.length + \"\\n\\n\");\n      } else {\n        window.alert('no mas de 10 imagenes');\n        return;\n      }\n    });\n  }\n\n  loadFile(file) {\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      console.log(reader.result);\n      this.previsualizacion = reader.result; //this.archivos.push(reader.result)\n    };\n\n    reader.readAsDataURL(file);\n  }\n  /*agregarFavorito(){\r\n    //console.log(this.dataEntrante);\r\n    /*la vraible de servicio con atributo de servicio emite un atributo =emit */\n\n  /*this.servicefavorito.disparadordeFavoritos.emit({\r\n    data:this.dataEntrante\r\n  })\r\n  } */\n\n  /* Para subir Archivo*/\n\n\n  subirArchivo() {\n    //Sube el producto\n    this.equipoService.newProducto(this.producto).subscribe(res => {\n      var info = res; //Recorre el arreglo de archivos\n\n      this.archivos.forEach(archivo => {\n        const formularioDeDatos = new FormData();\n        formularioDeDatos.append('image', archivo);\n        console.log(archivo); //Sube archivo uno por uno\n\n        this.equipoService.productoFoto(formularioDeDatos, info.id).subscribe(res => {\n          console.log('Respuesta ', res);\n        });\n      });\n      console.log('respuesta del servidor', res);\n    });\n\n    try {} catch (e) {\n      console.log('Error', e);\n    }\n  }\n\n}\n\nNewProductsComponent.ɵfac = function NewProductsComponent_Factory(t) {\n  return new (t || NewProductsComponent)(i0.ɵɵdirectiveInject(i1.EquipoService), i0.ɵɵdirectiveInject(i2.DomSanitizer));\n};\n\nNewProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NewProductsComponent,\n  selectors: [[\"new-products\"]],\n  decls: 26,\n  vars: 0,\n  consts: [[\"type\", \"button\", \"data-bs-toggle\", \"modal\", \"data-bs-target\", \"#staticBackdrop\", 1, \"btn\", \"btn-primary\"], [\"id\", \"staticBackdrop\", \"data-bs-backdrop\", \"static\", \"data-bs-keyboard\", \"false\", \"tabindex\", \"-1\", \"aria-labelledby\", \"staticBackdropLabel\", \"aria-hidden\", \"true\", 1, \"modal\", \"fade\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"staticBackdropLabel\", 1, \"modal-title\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"btn-close\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", 1, \"btn\", \"btn-secondary\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\"], [\"type\", \"button\", \"data-bs-dismiss\", \"modal\", \"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"click\"]],\n  template: function NewProductsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"head\");\n      i0.ɵɵelementStart(1, \"label\")(2, \"button\", 0);\n      i0.ɵɵtext(3, \" Agregar Producto \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"button\", 0);\n      i0.ɵɵtext(5, \" Launch static backdrop modal\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 1)(7, \"div\", 2)(8, \"div\", 3)(9, \"div\", 4)(10, \"h5\", 5);\n      i0.ɵɵtext(11, \"Modal title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"button\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"div\", 7);\n      i0.ɵɵtext(14, \" ... \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"div\", 8)(16, \"button\", 9);\n      i0.ɵɵtext(17, \"Close\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"button\", 10);\n      i0.ɵɵtext(19, \"Understood\");\n      i0.ɵɵelementEnd()()()()()();\n      i0.ɵɵtext(20, \" /* \");\n      i0.ɵɵelementStart(21, \"button\", 9);\n      i0.ɵɵtext(22, \"Close\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function NewProductsComponent_Template_button_click_23_listener() {\n        return ctx.subirArchivo();\n      });\n      i0.ɵɵtext(24, \"Guardar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(25, \"*\\n\");\n    }\n  },\n  styles: [_c0, _c0]\n});","map":{"version":3,"mappings":"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","names":["FormControl","FormGroup","Validators","NewProductsComponent","constructor","equipoService","sanitizer","titulo","required","minLength","maxLength","precio","categoria","estado","decripcion","ubicacion","fk_id_user","fk_id_department","fk_id_product_category","fk_id_product_status","var_name","text_description","dou_price","ngOnInit","producto","localStorage","getItem","tituloControl","productoForm","get","precioControl","categoriaControl","estadoControl","descripcionControl","ubicacionControl","capturarFile","event","Array","from","target","files","forEach","element","loadFile","archivos","length","push","console","log","window","alert","file","reader","FileReader","onload","result","previsualizacion","readAsDataURL","subirArchivo","newProducto","subscribe","res","info","archivo","formularioDeDatos","FormData","append","productoFoto","id","e","i0","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\Dennis Barahona\\Documents\\GitHub\\IS-802-0900-Proyecto-IS-Grupo-5\\Frontend\\src\\app\\navigation-products\\new-products\\new-products.component.ts","C:\\Users\\Dennis Barahona\\Documents\\GitHub\\IS-802-0900-Proyecto-IS-Grupo-5\\Frontend\\src\\app\\navigation-products\\new-products\\new-products.component.html"],"sourcesContent":["import { ReadVarExpr } from '@angular/compiler';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { async } from '@angular/core/testing';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { DomSanitizer, Title } from '@angular/platform-browser';\r\nimport { newProducto, EquipoService, uploadPhoto } from \"../../SERVICES/equipo.service\";\r\n\r\n\r\n\r\n\r\ninterface HtmlInputEvent extends Event {\r\n  target: HTMLInputElement & EventTarget | null;\r\n}\r\n\r\n@Component({\r\n  selector: 'new-products',\r\n  templateUrl: './new-products.component.html',\r\n  styleUrls: ['./new-products.component.css']\r\n})\r\nexport class NewProductsComponent implements OnInit {\r\n  public previsualizacion:any;\r\n  public archivos: any=[] //Sera de tipo array\r\n  public image: any //Enviar una imagen a la vez al servidor\r\n\r\n  constructor(private equipoService:EquipoService, private sanitizer: DomSanitizer) {\r\n   }\r\n\r\n  ngOnInit(): void {\r\n    this.producto.fk_id_user=localStorage.getItem('token')\r\n  }\r\n\r\n//agregar el formGrup\r\nproductoForm=new FormGroup({\r\n  // nombre: new FormControl('',[Validators.required, Validators.minLength(2) ]),\r\n  titulo: new FormControl('',[Validators.required,\r\n  Validators.minLength(3),\r\n  Validators.maxLength(20)]),\r\n  precio: new FormControl('',[Validators.required]),\r\n  categoria:new FormControl('',[Validators.required]),\r\n  estado:new FormControl('',[Validators.required]),\r\n  decripcion:new FormControl('',[Validators.required,\r\n  Validators.minLength(3), Validators.maxLength(30)]),\r\n  ubicacion:new FormControl('',[Validators.required])\r\n})\r\n/*\r\nget nombreControl():FormControl{\r\n  return this.loginForm.get('nombre') as FormControl\r\n}*/\r\n\r\nget tituloControl():FormControl{\r\n  return this.productoForm.get('titulo') as FormControl\r\n}\r\nget precioControl():FormControl{\r\n  return this.productoForm.get('precio') as FormControl\r\n}\r\nget categoriaControl():FormControl{\r\n  return this.productoForm.get('categoria') as FormControl\r\n}\r\nget estadoControl():FormControl{\r\n  return this.productoForm.get('estado') as FormControl\r\n}\r\nget descripcionControl():FormControl{\r\n  return this.productoForm.get('decripcion') as FormControl\r\n}\r\nget ubicacionControl():FormControl{\r\n  return this.productoForm.get('ubicacion') as FormControl\r\n}\r\n\r\ncapturarFile(event:any): any{\r\n  Array.from(event.target.files).forEach((element:any) => {\r\n    this.loadFile(element);\r\n    if(this.archivos.length < 10){\r\n      this.archivos.push(element)\r\n      console.log(\"\\n\\n<<<<\"+this.archivos.length+\"\\n\\n\");\r\n    }else{\r\n      window.alert('no mas de 10 imagenes')\r\n      return\r\n    }\r\n  });\r\n}\r\n\r\n  loadFile(file:File){\r\n    const reader=new FileReader();\r\n    reader.onload=()=>{\r\n      console.log(reader.result)\r\n\r\n    this.previsualizacion=reader.result\r\n\r\n    //this.archivos.push(reader.result)\r\n\r\n    };\r\n    reader.readAsDataURL(file);\r\n\r\n  }\r\n\r\n\r\n\r\n  //Extraer el base 64\r\n  /*\r\n  extraerBase64 =async ($event:any) => new Promise((resolve,reject) =>{\r\n    try{\r\n      const unsafeImg = window.URL.createObjectURL($event);\r\n      const image= this.sanitizer.bypassSecurityTrustUrl(unsafeImg);\r\n      const reader = new FileReader();\r\n\r\n      reader.readAsDataURL($event);\r\n      reader.onload =() =>{\r\n        resolve({\r\n          base:reader.result\r\n        });\r\n      };\r\n      reader.onerror = error =>{\r\n        resolve({\r\n          base:null\r\n        });\r\n      }; return null;\r\n    }catch(e){\r\n      return null;\r\n    }\r\n  });\r\n  */\r\n\r\n\r\n\r\n\r\n  producto:newProducto={\r\n    fk_id_user: '',\r\n    fk_id_department: '',\r\n    fk_id_product_category:'',\r\n    fk_id_product_status: '',\r\n    var_name: '',\r\n    text_description: '',\r\n    dou_price:0\r\n  }\r\n\r\n  /*agregarFavorito(){\r\n    //console.log(this.dataEntrante);\r\n    /*la vraible de servicio con atributo de servicio emite un atributo =emit */\r\n    /*this.servicefavorito.disparadordeFavoritos.emit({\r\n      data:this.dataEntrante\r\n    })\r\n  } */\r\n\r\n  /* Para subir Archivo*/\r\n  subirArchivo():any{\r\n\r\n    //Sube el producto\r\n    this.equipoService.newProducto(this.producto)\r\n    .subscribe(res=>{\r\n\r\n      var info:BookInfo = <any>res\r\n\r\n      //Recorre el arreglo de archivos\r\n      this.archivos.forEach((archivo:any) => {\r\n        const formularioDeDatos = new FormData();\r\n        formularioDeDatos.append('image',archivo)\r\n        console.log(archivo)\r\n\r\n        //Sube archivo uno por uno\r\n        this.equipoService.productoFoto(formularioDeDatos, info.id)\r\n          .subscribe(res=>{\r\n            console.log('Respuesta ',res)\r\n        })\r\n\r\n      })\r\n\r\n      console.log('respuesta del servidor',res);\r\n\r\n    })\r\n\r\n\r\n    try{\r\n    }catch(e){\r\n      console.log('Error',e);\r\n    }\r\n  }\r\n}\r\n\r\ninterface BookInfo {\r\n  status : string ;\r\n  id: string;\r\n}\r\n","<head>\r\n    <link rel=\"stylesheet\" href=\"new-products.component.css\">\r\n</head>\r\n\r\n<label>\r\n\r\n\r\n\r\n\r\n    <!-- Button trigger modal -->\r\n<button type=\"button\" class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#staticBackdrop\">\r\n    Agregar Producto\r\n  </button>\r\n\r\n  <!-- Modal -->\r\n  <!-- Button trigger modal -->\r\n<button type=\"button\" class=\"btn btn-primary\" data-bs-toggle=\"modal\" data-bs-target=\"#staticBackdrop\">\r\n  Launch static backdrop modal\r\n</button>\r\n\r\n<!-- Modal -->\r\n<div class=\"modal fade\" id=\"staticBackdrop\" data-bs-backdrop=\"static\" data-bs-keyboard=\"false\" tabindex=\"-1\" aria-labelledby=\"staticBackdropLabel\" aria-hidden=\"true\">\r\n  <div class=\"modal-dialog\">\r\n    <div class=\"modal-content\">\r\n      <div class=\"modal-header\">\r\n        <h5 class=\"modal-title\" id=\"staticBackdropLabel\">Modal title</h5>\r\n        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n      </div>\r\n      <div class=\"modal-body\">\r\n        ...\r\n      </div>\r\n      <div class=\"modal-footer\">\r\n        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n        <button type=\"button\" class=\"btn btn-primary\">Understood</button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n</label>\r\n\r\n\r\n\r\n\r\n/*    <!--Boton para subir el archivo y cerrar el modal-->\r\n<button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Close</button>\r\n<button type=\"button\" class=\"btn btn-primary\" data-bs-dismiss=\"modal\" type=\"submit\" (click)=\"subirArchivo()\" >Guardar</button>*\r\n"]},"metadata":{},"sourceType":"module"}