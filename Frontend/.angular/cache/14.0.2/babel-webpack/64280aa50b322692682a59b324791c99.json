{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Dennis Barahona/Documents/GitHub/IS-802-0900-Proyecto-IS-Grupo-5/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nlet NewProductsComponent = class NewProductsComponent {\n  constructor(equipoService, sanitizer) {\n    var _this = this;\n\n    this.equipoService = equipoService;\n    this.sanitizer = sanitizer;\n    this.archivos = []; //Sera de tipo array\n    //agregar el formGrup\n\n    this.productoForm = new FormGroup({\n      // nombre: new FormControl('',[Validators.required, Validators.minLength(2) ]),\n      titulo: new FormControl('', [Validators.required]),\n      precio: new FormControl('', [Validators.required]),\n      categoria: new FormControl('', [Validators.required]),\n      estado: new FormControl('', [Validators.required]),\n      decripcion: new FormControl('', [Validators.required]),\n      ubicacion: new FormControl('', [Validators.required])\n    }); //Extraer el base 64\n\n    this.extraerBase64 = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* ($event) {\n        return new Promise((resolve, reject) => {\n          try {\n            const unsafeImg = window.URL.createObjectURL($event);\n\n            const image = _this.sanitizer.bypassSecurityTrustUrl(unsafeImg);\n\n            const reader = new FileReader();\n            reader.readAsDataURL($event);\n\n            reader.onload = () => {\n              resolve({\n                base: reader.result\n              });\n            };\n\n            reader.onerror = error => {\n              resolve({\n                base: null\n              });\n            };\n\n            return null;\n          } catch (e) {\n            return null;\n          }\n        });\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    this.producto = {\n      fk_id_user: '',\n      fk_id_department: '',\n      fk_id_product_category: '',\n      fk_id_product_status: '',\n      var_name: '',\n      text_description: '',\n      dou_price: ''\n    };\n  }\n\n  ngOnInit() {\n    this.producto.fk_id_user = localStorage.getItem('token');\n  }\n  /*\r\n  get nombreControl():FormControl{\r\n    return this.loginForm.get('nombre') as FormControl\r\n  }*/\n\n\n  get tituloControl() {\n    return this.productoForm.get('titulo');\n  }\n\n  get precioControl() {\n    return this.productoForm.get('precio');\n  }\n\n  get categoriaControl() {\n    return this.productoForm.get('categoria');\n  }\n\n  get estadoControl() {\n    return this.productoForm.get('estado');\n  }\n\n  get descripcionControl() {\n    return this.productoForm.get('decripcion');\n  }\n\n  get ubicacionControl() {\n    return this.productoForm.get('ubicacion');\n  }\n\n  capturarFile(event) {\n    Array.from(event.target.files).forEach(element => {\n      this.loadFile(element);\n    });\n  }\n\n  loadFile(file) {\n    const reader = new FileReader();\n\n    reader.onload = () => {\n      console.log(reader.result);\n      this.previsualizacion = reader.result;\n      this.archivos.push(reader.result);\n    };\n\n    reader.readAsDataURL(file);\n  }\n  /*agregarFavorito(){\r\n    //console.log(this.dataEntrante);\r\n    /*la vraible de servicio con atributo de servicio emite un atributo =emit */\n\n  /*this.servicefavorito.disparadordeFavoritos.emit({\r\n    data:this.dataEntrante\r\n  })\r\n  } */\n\n  /* Para subir Archivo*/\n\n\n  subirArchivo() {\n    try {\n      const formularioDeDatos = new FormData();\n      this.archivos.forEach(archivo => {\n        formularioDeDatos.append('image', archivo);\n        console.log(formularioDeDatos);\n      }); //Para agregar mas datos en la funcion\n\n      this.equipoService.newProducto(this.producto).subscribe(res => {\n        console.log('respuesta del servidor', res);\n      });\n      this.equipoService.productoFoto(formularioDeDatos).subscribe(res => {\n        console.log('Respuesta ', res);\n      });\n    } catch (e) {\n      console.log('Error', e);\n    }\n  }\n\n};\nNewProductsComponent = __decorate([Component({\n  selector: 'new-products',\n  templateUrl: './new-products.component.html',\n  styleUrls: ['./new-products.component.css']\n})], NewProductsComponent);\nexport { NewProductsComponent };","map":{"version":3,"mappings":"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","names":["Component","FormControl","FormGroup","Validators","NewProductsComponent","constructor","equipoService","sanitizer","titulo","required","precio","categoria","estado","decripcion","ubicacion","$event","Promise","resolve","reject","unsafeImg","window","URL","createObjectURL","image","bypassSecurityTrustUrl","reader","FileReader","readAsDataURL","onload","base","result","onerror","error","e","fk_id_user","fk_id_department","fk_id_product_category","fk_id_product_status","var_name","text_description","dou_price","ngOnInit","producto","localStorage","getItem","tituloControl","productoForm","get","precioControl","categoriaControl","estadoControl","descripcionControl","ubicacionControl","capturarFile","event","Array","from","target","files","forEach","element","loadFile","file","console","log","previsualizacion","archivos","push","subirArchivo","formularioDeDatos","FormData","archivo","append","newProducto","subscribe","res","productoFoto","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\Dennis Barahona\\Documents\\GitHub\\IS-802-0900-Proyecto-IS-Grupo-5\\Frontend\\src\\app\\navigation-products\\new-products\\new-products.component.ts"],"sourcesContent":["import { ReadVarExpr } from '@angular/compiler';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { async } from '@angular/core/testing';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { DomSanitizer, Title } from '@angular/platform-browser';\r\nimport { newProducto, EquipoService,status } from \"../../SERVICES/equipo.service\";\r\n\r\n\r\n\r\n\r\ninterface HtmlInputEvent extends Event {\r\n  target: HTMLInputElement & EventTarget | null;\r\n}\r\n\r\n@Component({\r\n  selector: 'new-products',\r\n  templateUrl: './new-products.component.html',\r\n  styleUrls: ['./new-products.component.css']\r\n})\r\nexport class NewProductsComponent implements OnInit {\r\n  public previsualizacion:any;\r\n  public archivos: any=[] //Sera de tipo array\r\n\r\n  constructor(private equipoService:EquipoService, private sanitizer: DomSanitizer) {\r\n   }\r\n\r\n  ngOnInit(): void {\r\n    this.producto.fk_id_user=localStorage.getItem('token')\r\n  }\r\n\r\n//agregar el formGrup\r\nproductoForm=new FormGroup({\r\n  // nombre: new FormControl('',[Validators.required, Validators.minLength(2) ]),\r\n  titulo: new FormControl('',[Validators.required]),\r\n  precio: new FormControl('',[Validators.required]),\r\n  categoria:new FormControl('',[Validators.required]),\r\n  estado:new FormControl('',[Validators.required]),\r\n  decripcion:new FormControl('',[Validators.required]),\r\n  ubicacion:new FormControl('',[Validators.required])\r\n})\r\n/*\r\nget nombreControl():FormControl{\r\n  return this.loginForm.get('nombre') as FormControl\r\n}*/\r\n\r\nget tituloControl():FormControl{\r\n  return this.productoForm.get('titulo') as FormControl\r\n}\r\nget precioControl():FormControl{\r\n  return this.productoForm.get('precio') as FormControl\r\n}\r\nget categoriaControl():FormControl{\r\n  return this.productoForm.get('categoria') as FormControl\r\n}\r\nget estadoControl():FormControl{\r\n  return this.productoForm.get('estado') as FormControl\r\n}\r\nget descripcionControl():FormControl{\r\n  return this.productoForm.get('decripcion') as FormControl\r\n}\r\nget ubicacionControl():FormControl{\r\n  return this.productoForm.get('ubicacion') as FormControl\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n  capturarFile(event:any): any{\r\n    Array.from(event.target.files).forEach((element:any) => {\r\n      this.loadFile(element);\r\n      \r\n    });\r\n  }\r\n  loadFile(file:File){\r\n    const reader=new FileReader();\r\n    reader.onload=()=>{\r\n      console.log(reader.result)\r\n\r\n    this.previsualizacion=reader.result\r\n\r\n    this.archivos.push(reader.result)\r\n\r\n    };\r\n    reader.readAsDataURL(file);\r\n\r\n  }\r\n\r\n\r\n\r\n  //Extraer el base 64\r\n  \r\n  extraerBase64 =async ($event:any) => new Promise((resolve,reject) =>{ \r\n    try{\r\n      const unsafeImg = window.URL.createObjectURL($event);\r\n      const image= this.sanitizer.bypassSecurityTrustUrl(unsafeImg);\r\n      const reader = new FileReader();\r\n\r\n      reader.readAsDataURL($event);\r\n      reader.onload =() =>{\r\n        resolve({\r\n          base:reader.result\r\n        });\r\n      };\r\n      reader.onerror = error =>{\r\n        resolve({\r\n          base:null\r\n        });\r\n      }; return null;\r\n    }catch(e){\r\n      return null;\r\n    }\r\n  });\r\n  \r\n\r\n\r\n\r\n  producto:newProducto={\r\n    fk_id_user: '',\r\n    fk_id_department: '',\r\n    fk_id_product_category:'',\r\n    fk_id_product_status: '',\r\n    var_name: '',\r\n    text_description: '',\r\n    dou_price: ''\r\n  }\r\n\r\n  /*agregarFavorito(){\r\n    //console.log(this.dataEntrante);\r\n    /*la vraible de servicio con atributo de servicio emite un atributo =emit */\r\n    /*this.servicefavorito.disparadordeFavoritos.emit({\r\n      data:this.dataEntrante\r\n    })\r\n  } */\r\n\r\n  /* Para subir Archivo*/\r\n  subirArchivo():any{\r\n    try{\r\n      \r\n      const formularioDeDatos= new FormData();\r\n\r\n      this.archivos.forEach((archivo:any) => {\r\n        formularioDeDatos.append('image',archivo)\r\n        console.log(formularioDeDatos);\r\n      })\r\n      //Para agregar mas datos en la funcion\r\n\r\n     \r\n      this.equipoService.newProducto(this.producto)\r\n      .subscribe(res=>{\r\n        console.log('respuesta del servidor',res);\r\n      })\r\n      this.equipoService.productoFoto(formularioDeDatos)\r\n      .subscribe(res=>{\r\n        console.log('Respuesta ',res)\r\n      })\r\n    }catch(e){\r\n      console.log('Error',e);\r\n    }\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}